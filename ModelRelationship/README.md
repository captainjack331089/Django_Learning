- Model -- > DB
  - 迁移
    - 生成迁移
    - 执行迁移
  - 迁移原理
    - 根据既有迁移和Model进行比对
    - 生成新的迁移文件
    - 去数据库中查询记录，直接过滤掉已经执行过的迁移文件
    - 执行未执行的迁移文件，并记录





- 模型关系
  - 1:1 
    - OneToOneField
    - 确认主从关系
    - 底层实现
      - 从表中声明外键并添加唯一约束
    - 获取
      - 从获取主
        - 显性属性
      - 主获取从
        - 隐性属性
        - 默认就是从表模型名小写
    - 删除
      - 从表数据删除
        - 主表数据不受影响
      - 主表数据删除
        - 默认CASECADE	
          - 默认级联数据被删除
        - PROTECT
          - 受保护的
          - 当存在级联数据的时候，删除主表数据，会抛出异常
        - SET
          - SET_NULL
            - 置空
            - 前提是允许为NULL
          - SET_DEFAULT
            - 置为默认值
            - 前提存在默认值
          - SET()
            - 自己赋值
  - 1:M 
    - 直接使用外键实现
    - 主从，多是从
    - 级联对象获取
      - 从获取主
        - 显性属性
      - 主获取从
        - 隐性属性
        - 默认是级联数据_set
        - 也是Manager的一个字类
          - filter
          - exclude
          - all
          - 切片
    - 数据删除同一对一
  - M：N
    - Many to Many
    - 两张以上的表的对应关系
    - 会产生额外的关系表
      - 表中使用多个外键实现
      - 外键对应关系表的主键
    - 数据获取
      - 两张表的结构完全一样
      - 从获取主
        - Manager对象
          - all
          - filter
          - exclude
          - 操作级联数据
            - add
            - remove
            - clear
            - set
        - 显性属性
      - 主获取从
        - 隐性属性
        - Manager对象
          - 和其他manager一样 
- 模型继承
  - 默认一个模型在数据库中映射一张表
  - 如果模型存在继承的时候，父模型产生表映射
    - 子模型对应的表会通过外键和父表产生关联
  - 关系型数据库性能
    - 数据量越大性能越低
    - 关系越多越复杂性能越低
  - 抽象模型 
    - 在Model元信息中添加abstract=True
    - 抽象的模型不会在数据库中产生表
    - 子模型拥有父模型中的所有字段



### PROJECT

- 创建了人，身份证信息并关联 
- 增删合并人与身份证信息
- 创建顾客和商品多对多的表单信息
- 增删顾客商品信息
- 利用继承创建动物--猫狗信息